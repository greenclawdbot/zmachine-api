// OP codes which deal with output streams are defined here
import Output from '../resources/output';
import { isBadArg, throwBadArg } from './types';
import { BIT_15, BIT_16 } from '../utils/constants';
/* eslint-disable @typescript-eslint/camelcase */
export default class OutputOps {
    static output_stream(number, table) {
        if (isBadArg(number)) {
            throwBadArg();
        }
        let signedNumber = number;
        if (signedNumber >= BIT_15) {
            signedNumber -= BIT_16;
        }
        if (signedNumber === 0) {
            // do nothing
        }
        else if (signedNumber === 1) {
            Output.setStream1(true);
        }
        else if (signedNumber === -1) {
            Output.setStream1(false);
        }
        else if (signedNumber === 2) {
            Output.setStream2(true);
        }
        else if (signedNumber === -2) {
            Output.setStream2(false);
        }
        else if (signedNumber === 3) {
            if (isBadArg(table)) {
                throwBadArg();
            }
            Output.startStream3(table);
        }
        else if (signedNumber === -3) {
            Output.endStream3();
        }
        else if (signedNumber === 4) {
            Output.setStream4(true);
        }
        else if (signedNumber === -4) {
            Output.setStream4(false);
        }
        else {
            throw new Error(`Unexpected stream number ${signedNumber}`);
        }
    }
    static buffer_mode(flag) {
        if (isBadArg(flag)) {
            throwBadArg();
        }
        // We always word wrap in the lower window
        // and never in the upper so this is a no op
    }
    static sound_effect(number, effect, volume, routine) {
        if (effect !== null || volume !== null || routine !== null) {
            throw new Error('sound effects beyond BEEP and BOOP are unsupported');
        }
        if (number === null || number === 1) {
            Output.makeNoise('BEEP');
        }
        else if (number === 2) {
            Output.makeNoise('BOOP');
        }
        else {
            throw new Error(`unexpected sound effect ${number}`);
        }
    }
}
