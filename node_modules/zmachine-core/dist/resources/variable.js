import Memory from '../state/memory';
import Stack from '../state/stack';
import Header from './header';
import { BIT_8, BIT_16 } from '../utils/constants';
export default class Variable {
    static readVar(varNum) {
        if (varNum < 0 || varNum >= BIT_8) {
            throw new Error(`varNum out of range ${varNum}`);
        }
        if (varNum === 0) {
            return Stack.popStack();
        }
        if (varNum < 16) {
            return Stack.getLocal(varNum - 1);
        }
        const globalVarTable = Header.globalVarTable();
        const addr = globalVarTable + ((varNum - 16) * 2);
        return Memory.getWord(addr);
    }
    static writeVar(varNum, word) {
        if (varNum < 0 || varNum >= BIT_8) {
            throw new Error(`varNum out of range ${varNum}`);
        }
        if (word < 0 || word >= BIT_16) {
            throw new Error(`word out of range ${word}`);
        }
        if (varNum === 0) {
            Stack.pushStack(word);
        }
        else if (varNum < 16) {
            Stack.setLocal(varNum - 1, word);
        }
        else {
            const globalVarTable = Header.globalVarTable();
            const addr = globalVarTable + ((varNum - 16) * 2);
            Memory.setWord(addr, word);
        }
    }
}
